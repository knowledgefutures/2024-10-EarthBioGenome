---
import { Quote, Download, Share } from 'lucide-react';
import type { Genome, GenomeNote } from '~/types/pubs';
import { Button } from '~/components/ui/button';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '~/components/ui/card';
import { getTechnicalReviews, getManualReviews } from '~/lib/populateData';
import TechnicalReviewCard from '~/components/TechnicalReviewCard';
import ManualReviewCard from '~/components/ManualReviewCard';

interface Props {
	genome: Genome;
	genomeNote: GenomeNote;
}

const { genome, genomeNote } = Astro.props;
const technicalReviews = getTechnicalReviews(genomeNote.id);
const manualReviews = getManualReviews(genomeNote.id);
---

<div class="">
	<div class="mb-6 border-neutral-300 rounded flex justify-end space-x-2">
		<Button variant="outline" size="sm"><Quote />Cite</Button>
		<Button variant="outline" size="sm"><Download />Download</Button>
		<Button variant="outline" size="sm"><Share />Share</Button>
	</div>
	<Card>
		<CardHeader>
			<CardTitle>Reviews</CardTitle>
			<CardDescription>
				All genome notes undergo automated technical reviews, with manual reviews added as
				needed.
			</CardDescription>
		</CardHeader>
		<CardContent>
			{
				technicalReviews.map((technicalReview) => {
					return <TechnicalReviewCard genomeNote={genomeNote} technicalReview={technicalReview} client:load />;
				})
			}
			{
				manualReviews.map((manualReview) => {
					return <ManualReviewCard manualReview={manualReview} client:load />;
				})
			}
		</CardContent>
	</Card>
</div>
